generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Landlord {
  landlord_id String     @id @default(uuid())
  trust_score Int        @default(0)
  first_name      String
  last_name       String
  phone_number    String     @unique
  address         String
  profile_picture String?
  created_at  DateTime   @default(now())
  updated_at  DateTime   @updatedAt
  Property    Property[]
  user_id     String

  user User @relation(fields: [user_id], references: [user_name])

  @@map("landlord")
}

enum UserType {
  STUDENT
  LANDLORD
  ADMIN
}

model User {
  user_name         String     @id
  created_at      DateTime   @default(now())
  updated_at      DateTime   @updatedAt
  Landlord        Landlord[]
  email           String
  password        String
  user_type       UserType  @default(STUDENT)

  @@map("user")
}

model Property {
  property_id String   @id @default(uuid())
  landlord_id String
  address     String
  rent        Float
  amenities   String
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  landlord    Landlord  @relation(fields: [landlord_id], references: [landlord_id])
  Listing     Listing[]

  @@map("property")
}

model Listing {
  listing_id  String   @id @default(uuid())
  property_id String
  title       String
  description String
  status      String //available,sold etc.
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  property Property @relation(fields: [property_id], references: [property_id])

  @@map("listing")
}

model Media {
  media_id   String   @id @default(uuid())
  model_name String // tables names
  model_id   String // record ids
  media_url  String
  media_type String //can be image,video etc.
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("media")
}
